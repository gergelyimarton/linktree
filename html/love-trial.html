<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Love Trial</title>
  <link rel="icon" href="../images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="../CSS/love-trial.css">

  
</head>
<body>
  <div class="floating-hearts">
    <span class="heart heart-1">‚ù§Ô∏è</span>
    <span class="heart heart-2">üíñ</span>
    <span class="heart heart-3">üíï</span>
    <span class="heart heart-4">üíó</span>
    <span class="heart heart-5">üíò</span>
    <span class="heart heart-6">üíù</span>
    <span class="heart heart-7">üíû</span>
    <span class="heart heart-8">üíì</span>
    <span class="heart heart-9">ü©∑</span>
  </div>
  <div class="body-container">
  <h1>Love Trial</h1>

  <details class="info-dropdown">
    <summary>
      <span class="info-icon">‚ÑπÔ∏è</span>
      <span class="info-title">Mi ez az oldal √©s hogyan haszn√°ld?</span>
      <span class="arrow"></span>
    </summary>
    <div class="info-content">
      <h3>Mi ez az oldal?</h3>
      <p>A Love Trial egy szem√©lyes √©rt√©kel≈ë eszk√∂z, amely seg√≠t felm√©rni egy potenci√°lis partner kompatibilit√°s√°t veled. Az oldal k√ºl√∂nb√∂z≈ë aspektusokat vizsg√°l t√∂bb randev√∫ sor√°n, hogy √°tfog√≥ k√©pet kapj a kapcsolat lehet≈ës√©geir≈ël.</p>

      <h3>Hogyan haszn√°ld?</h3>
      <ol>
        <li>Minden randev√∫ ut√°n t√∂ltsd ki az adott oszlopot a <strong>F≈ë aspektusok</strong> t√°bl√°zatban</li>
        <li>Az 5. randev√∫ ut√°n add meg a <strong>Fontos aspektusok</strong> √∂sszes√≠tett pontjait</li>
        <li>√ârt√©keld az <strong>Egy√©b tulajdons√°gokat</strong> - ezek a "Soksz√≠n≈±s√©g" pontsz√°mba sz√°m√≠tanak</li>
        <li>Adj hozz√° <strong>Egy√©ni tulajdons√°gokat</strong> ha van valami egyedi szempont (+/- pontok)</li>
        <li>N√©zd meg az <strong>√ñsszegz√©st</strong> a v√©gs≈ë illeszked√©si ar√°ny√©rt</li>
      </ol>

      <h3>Pontoz√°si rendszer</h3>
      <ul>
        <li><strong>1 pont</strong> - Gyenge / Nem jellemz≈ë</li>
        <li><strong>2 pont</strong> - √Åtlag alatti</li>
        <li><strong>3 pont</strong> - √Åtlagos / Semleges</li>
        <li><strong>4 pont</strong> - J√≥ / √Åtlag feletti</li>
        <li><strong>5 pont</strong> - Kiv√°l√≥ / Nagyon jellemz≈ë</li>
      </ul>

      <h3>Szekci√≥k magyar√°zata</h3>
      <ul>
        <li><strong>F≈ë aspektusok</strong> - A legfontosabb szem√©lyis√©gjegyek, minden randev√∫n k√ºl√∂n √©rt√©kelve (1-5. randi)</li>
        <li><strong>Fontos aspektusok</strong> - Tov√°bbi l√©nyeges szempontok, egy √∂sszes√≠tett pontsz√°mmal az 5. randi ut√°n</li>
        <li><strong>Egy√©b tulajdons√°gok</strong> - Kieg√©sz√≠t≈ë jellemz≈ëk, amelyek a "Soksz√≠n≈±s√©g" √©rt√©k√©be sz√°m√≠tanak bele</li>
        <li><strong>Egy√©ni tulajdons√°gok</strong> - Saj√°t szempontok hozz√°ad√°sa -5 √©s +5 k√∂z√∂tti pontokkal</li>
      </ul>

      <h3>Eredm√©ny √©rtelmez√©se</h3>
      <p>A v√©gs≈ë illeszked√©si ar√°ny az el√©rt pontok √©s a maxim√°lisan el√©rhet≈ë pontok h√°nyadosa. Min√©l magasabb a sz√°zal√©k, ann√°l jobb a kompatibilit√°s. Az <strong>√ârtelmez√©s</strong> t√°bl√°zat seg√≠t kategoriz√°lni az eredm√©nyt.</p>
    </div>
  </details>

  <h2 data-emoji="üíé">F≈ë aspektusok</h2>
  <table id="mainAspects">
    <thead>
      <tr><th>F≈ë aspektus</th><th>1. randi</th><th>2. randi</th><th>3. randi</th><th>4. randi</th><th>5. randi</th><th>Pontsz√°m</th></tr>
    </thead>
    <tbody>
      <tr><td>üåø  Spontaneit√°s</td><td data-label="1."><select></select></td><td data-label="2."><select></select></td><td data-label="3."><select></select></td><td data-label="4."><select></select></td><td data-label="5."><select></select></td><td class="score">0</td></tr>
      <tr><td>üß†  Intelligencia / Kreativit√°s</td><td data-label="1."><select></select></td><td data-label="2."><select></select></td><td data-label="3."><select></select></td><td data-label="4."><select></select></td><td data-label="5."><select></select></td><td class="score">0</td></tr>
      <tr><td>ü§ù  Egy√ºttm≈±k√∂d√©s</td><td data-label="1."><select></select></td><td data-label="2."><select></select></td><td data-label="3."><select></select></td><td data-label="4."><select></select></td><td data-label="5."><select></select></td><td class="score">0</td></tr>
      <tr><td>üßò‚Äç‚ôÄÔ∏è  Komfortz√≥na rugalmass√°ga</td><td data-label="1."><select></select></td><td data-label="2."><select></select></td><td data-label="3."><select></select></td><td data-label="4."><select></select></td><td data-label="5."><select></select></td><td class="score">0</td></tr>
      <tr><td>üî•  Kitart√°s / Stresszkezel√©s</td><td data-label="1."><select></select></td><td data-label="2."><select></select></td><td data-label="3."><select></select></td><td data-label="4."><select></select></td><td data-label="5."><select></select></td><td class="score">0</td></tr>
      <tr><td>üí°  √ñnreflexi√≥</td><td data-label="1."><select></select></td><td data-label="2."><select></select></td><td data-label="3."><select></select></td><td data-label="4."><select></select></td><td data-label="5."><select></select></td><td class="score">0</td></tr>
      <tr><td>üí¨  √ârzelmi intelligencia / Spiritualit√°s</td><td data-label="1."><select></select></td><td data-label="2."><select></select></td><td data-label="3."><select></select></td><td data-label="4."><select></select></td><td data-label="5."><select></select></td><td class="score">0</td></tr>
      <tr><td>üòä  Hangulatom</td><td data-label="1."><select></select></td><td data-label="2."><select></select></td><td data-label="3."><select></select></td><td data-label="4."><select></select></td><td data-label="5."><select></select></td><td class="score">0</td></tr>
    </tbody>
  </table>

  <h2 data-emoji="‚≠ê">Fontos aspektusok</h2>
  <table id="importantAspects">
    <thead>
      <tr><th>Aspektus</th><th>√ñsszes√≠tett pont az 5. randi ut√°n</th></tr>
    </thead>
    <tbody>
      <tr><td>üé≠  Humor</td><td><select></select></td></tr>
      <tr><td>üß≤  Fizikai vonzalom</td><td><select></select></td></tr>
      <tr><td>üß©  Kapcsol√≥d√°si k√∂nnyeds√©g</td><td><select></select></td></tr>
      <tr><td>üëï  √ñlt√∂zk√∂d√©s</td><td><select></select></td></tr>
      <tr><td>üéß  Zenei √≠zl√©s</td><td><select></select></td></tr>
      <tr><td>üßº  Higi√©nia</td><td><select></select></td></tr>
      <tr><td>ü´¶  Szexualit√°s</td><td><select></select></td></tr>
      <tr><td>üåà  Soksz√≠n≈±s√©g (Egy√©b tulajdons√°gok)</td><td id="diversityTotal">0</td></tr>
    </tbody>
  </table>

  <h2 data-emoji="üåü">Egy√©b tulajdons√°gok</h2>
  <table id="otherProps">
    <thead><tr><th>Tulajdons√°g</th><th>Pont</th></tr></thead>
    <tbody>
      <tr><td>Amb√≠ci√≥zuss√°g / Szenved√©lyess√©g</td><td><select></select></td></tr>
      <tr><td>Autentikuss√°g</td><td><select></select></td></tr>
      <tr><td>B√°tors√°g</td><td><select></select></td></tr>
      <tr><td>B√∂lcsess√©g</td><td><select></select></td></tr>
      <tr><td>Csal√°d-k√∂zpont√∫s√°g</td><td><select></select></td></tr>
      <tr><td>Energikuss√°g</td><td><select></select></td></tr>
      <tr><td>Kalandv√°gy√°s / Kih√≠v√°skedvel√©s</td><td><select></select></td></tr>
      <tr><td>Kedvess√©g / Szel√≠ds√©g</td><td><select></select></td></tr>
      <tr><td>Nyugodts√°g</td><td><select></select></td></tr>
      <tr><td>√ñn√°ll√≥s√°g</td><td><select></select></td></tr>
      <tr><td>≈êszintes√©g / H≈±s√©gess√©g</td><td><select></select></td></tr>
      <tr><td>Szer√©nys√©g</td><td><select></select></td></tr>
      <tr><td>Udvariass√°g</td><td><select></select></td></tr>
      <tr><td><strong>Tulajdons√°gok √∂sszes√≠tett pontsz√°ma</strong></td><td id="otherPropsTotal">0</td></tr>
    </tbody>
  </table>

  <h2 data-emoji="‚ú®">Egy√©ni tulajdons√°gok</h2>
  <table id="customProps">
    <thead><tr><th>Tulajdons√°g neve</th><th>Pont (+/-)</th></tr></thead>
    <tbody>
      <tr><td><input type="text" class="custom-name" placeholder="Tulajdons√°g neve..."></td><td><input type="number" class="custom-score" value="0" min="-5" max="5"></td></tr>
      <tr><td><input type="text" class="custom-name" placeholder="Tulajdons√°g neve..."></td><td><input type="number" class="custom-score" value="0" min="-5" max="5"></td></tr>
      <tr><td><input type="text" class="custom-name" placeholder="Tulajdons√°g neve..."></td><td><input type="number" class="custom-score" value="0" min="-5" max="5"></td></tr>
      <tr><td><input type="text" class="custom-name" placeholder="Tulajdons√°g neve..."></td><td><input type="number" class="custom-score" value="0" min="-5" max="5"></td></tr>
      <tr><td><input type="text" class="custom-name" placeholder="Tulajdons√°g neve..."></td><td><input type="number" class="custom-score" value="0" min="-5" max="5"></td></tr>
      <tr><td><input type="text" class="custom-name" placeholder="Tulajdons√°g neve..."></td><td><input type="number" class="custom-score" value="0" min="-5" max="5"></td></tr>
      <tr><td><input type="text" class="custom-name" placeholder="Tulajdons√°g neve..."></td><td><input type="number" class="custom-score" value="0" min="-5" max="5"></td></tr>
      <tr><td><input type="text" class="custom-name" placeholder="Tulajdons√°g neve..."></td><td><input type="number" class="custom-score" value="0" min="-5" max="5"></td></tr>
      <tr><td><input type="text" class="custom-name" placeholder="Tulajdons√°g neve..."></td><td><input type="number" class="custom-score" value="0" min="-5" max="5"></td></tr>
      <tr><td><input type="text" class="custom-name" placeholder="Tulajdons√°g neve..."></td><td><input type="number" class="custom-score" value="0" min="-5" max="5"></td></tr>
      <tr><td><strong>Pontsz√°m √∂sszesen</strong></td><td id="customPropsTotal">0</td></tr>
    </tbody>
  </table>

  <h2 data-emoji="üìä">√ñsszegz√©s</h2>
  <table id="summary">
    <tbody>
      <tr><td>√ârt√©kelt mez≈ëk sz√°ma</td><td id="filledCount">0 db</td></tr>
      <tr><td>El√©rhet≈ë max pontsz√°m</td><td id="maxScore">0 pont</td></tr>
      <tr><td>El√©rt pontsz√°m</td><td id="achievedScore">0 pont</td></tr>
      <tr><td>Illeszked√©si ar√°ny</td><td id="fitRatio">0,00%</td></tr>
    </tbody>
  </table>

  <h2 data-emoji="üìñ">√ârtelmez√©s</h2>
  <table>
    <tbody>
      <tr><td>90‚Äì100%</td><td>üü©  Kiv√©teles illeszked√©s</td></tr>
      <tr><td>70‚Äì89%</td><td>üü¶  Er≈ës kompatibilit√°s</td></tr>
      <tr><td>40‚Äì69%</td><td>üü®  R√©szleges kompatibilit√°s</td></tr>
      <tr><td>20‚Äì39%</td><td>üüß  Figyelmeztet≈ë z√≥na</td></tr>
      <tr><td>0‚Äì19%</td><td>üü•  Alacsony illeszked√©s</td></tr>
    </tbody>
  </table>

  <button class="btn" onclick="downloadJSON()">Eredm√©ny let√∂lt√©se (JSON)</button>
  <input type="file" id="jsonUpload" accept="application/json" class="btn" />

  <a href="projects.html">
    <button class="back-button">Go back</button>
  </a>

  <footer>
    Ez egy statikus HTML oldal. Az adatok leny√≠l√≥ list√°kb√≥l v√°laszthat√≥k. A let√∂lt√∂tt JSON tartalmazza az aktu√°lis √°llapotot, amit k√©s≈ëbb vissza lehet t√∂lteni.
  </footer>
  
  
  









  <script>
    window.addEventListener('DOMContentLoaded', () => {
      // 1. Felt√∂ltj√ºk az √∂sszes selectet 1‚Äì5 opci√≥kkal (+ √ºres)
      document.querySelectorAll('select').forEach(sel => {
        sel.innerHTML = '<option value="">-</option>' +
          Array.from({length:5}, (_,i)=>`<option value="${i+1}">${i+1}</option>`).join('');

        sel.addEventListener('change', updateAll);
      });

      // 2. MainAspects utols√≥ oszlop l√©trehoz√°sa (ha m√©g nincs span)
      document.querySelectorAll('#mainAspects tbody tr').forEach(tr=>{
        const lastTd = tr.querySelector('td.score');
        if(!lastTd) {
          const tds = tr.querySelectorAll('td');
          tds[tds.length-1].innerHTML = '<span class="score">0</span>';
        }
      });

      // 3. Custom properties event listeners
      document.querySelectorAll('#customProps .custom-score').forEach(input => {
        input.addEventListener('input', updateAll);
      });

      updateAll(); // indul√°skor is friss√≠t
    });
    











    function updateAll() {
  // üîπ 1. Friss√≠tj√ºk mainAspects pontsz√°m oszlopait
  document.querySelectorAll('#mainAspects tbody tr').forEach(tr=>{
    const selects = Array.from(tr.querySelectorAll('select')).slice(0,5);
    const scoreSpan = tr.querySelector('.score') || tr.querySelector('td:last-child');
    const sum = selects.reduce((acc, s) => acc + Number(s.value || 0), 0);
    if(scoreSpan) scoreSpan.textContent = sum;
  });

  // üîπ 2. √ñsszes√≠tett √©rt√©kek csak mainAspects + importantAspects
  let totalSum = 0;
  let filled = 0;

  document.querySelectorAll('#mainAspects select, #importantAspects select').forEach(sel => {
    const v = parseInt(sel.value,10);
    if(!isNaN(v)){
      totalSum += v;
      filled++;
    }
  });

  // üîπ 3. √ñsszes√≠tett pont az "Egy√©b tulajdons√°gok" t√°bl√°zatb√≥l
  let otherSum = 0;
  document.querySelectorAll('#otherProps tbody tr:not(:last-child) select').forEach(sel=>{
    const v = parseInt(sel.value,10);
    if(!isNaN(v)) otherSum += v;
  });
  document.getElementById('otherPropsTotal').textContent = otherSum;

  // üîπ 4. DiversityScore az otherPropsTotal alapj√°n
  const totalForDiversity = parseInt(document.getElementById('otherPropsTotal').textContent,10) || 0;
  let diversityScore = 0;
  if(totalForDiversity <= 10) diversityScore = 0;
  else if(totalForDiversity <= 20) diversityScore = 1;
  else if(totalForDiversity <= 30) diversityScore = 2;
  else if(totalForDiversity <= 40) diversityScore = 3;
  else if(totalForDiversity <= 50) diversityScore = 4;
  else if(totalForDiversity > 60) diversityScore = 5;

  document.getElementById('diversityTotal').textContent = diversityScore;

  // üîπ 5. Hozz√°adjuk a diversityScore-t a totalSum-hoz
  totalSum += diversityScore;

  // üîπ 6. Custom properties √∂sszes√≠t√©se
  let customSum = 0;
  document.querySelectorAll('#customProps .custom-score').forEach(input => {
    const v = parseInt(input.value, 10);
    if (!isNaN(v)) customSum += v;
  });
  document.getElementById('customPropsTotal').textContent = customSum;

  // üîπ 7. Hozz√°adjuk a custom pontokat a totalSum-hoz
  totalSum += customSum;

  // Ha van kit√∂lt√∂tt mez≈ë, hozz√°adjuk a diversityScore-t is
  const totalFilled = filled > 0 ? filled + 1 : 0; // +1 a diversityScore-√©rt, de csak ha van kit√∂lt√∂tt mez≈ë
  const maxScore = filled > 0 ? filled * 5 + 5 : 0; // +5 a diversityScore max, de csak ha van kit√∂lt√∂tt mez≈ë
  const fitRatio = maxScore > 0 ? ((totalSum / maxScore) * 100).toFixed(2) : '0.00';

  document.getElementById('filledCount').textContent = totalFilled + ' db';
  document.getElementById('maxScore').textContent = maxScore + ' pont';
  document.getElementById('achievedScore').textContent = totalSum + ' pont';
  document.getElementById('fitRatio').textContent = fitRatio + '%';
}

// minden select v√°ltoz√°skor friss√≠t√ºnk
document.querySelectorAll('select').forEach(sel=>{
  sel.addEventListener('change', updateAll);
});

// custom score inputok v√°ltoz√°skor friss√≠t√ºnk
document.querySelectorAll('#customProps .custom-score').forEach(input => {
  input.addEventListener('input', updateAll);
  input.addEventListener('change', updateAll);
});

// indul√°skor is friss√≠tj√ºk
updateAll();










    document.querySelectorAll('#otherProps select').forEach(sel => {
      sel.innerHTML = '<option value="">-</option>' + 
                    Array.from({length:5}, (_,i)=>`<option value="${i+1}">${i+1}</option>`).join('');
      sel.addEventListener('change', updateOtherPropsTotal);
    });

    function updateOtherPropsTotal() {
      let sum = 0;
      document.querySelectorAll('#otherProps tbody tr:not(:last-child) select').forEach(sel => {
      const v = parseInt(sel.value,10);
      if(!isNaN(v)) sum += v;
      });
      document.getElementById('otherPropsTotal').textContent = sum;
    }

    // indul√°skor is friss√≠tj√ºk
    updateOtherPropsTotal();
















    // üîπ JSON let√∂lt√©s √©s felt√∂lt√©s
    function tableToArray(tableId){
      const rows = document.querySelectorAll(`#${tableId} tbody tr`);
      return Array.from(rows).map(r=> Array.from(r.querySelectorAll('td')).map(td=>{
        const sel = td.querySelector('select');
        return sel ? sel.value : td.innerText.trim();
      }));
    }
    
    function getCustomProps() {
      const rows = document.querySelectorAll('#customProps tbody tr:not(:last-child)');
      return Array.from(rows).map(tr => {
        const nameInput = tr.querySelector('.custom-name');
        const scoreInput = tr.querySelector('.custom-score');
        return {
          name: nameInput ? nameInput.value : '',
          score: scoreInput ? parseInt(scoreInput.value, 10) || 0 : 0
        };
      });
    }

    function downloadJSON(){
      const data = {
        mainAspects: tableToArray('mainAspects'),
        importantAspects: tableToArray('importantAspects'),
        otherProps: tableToArray('otherProps'),
        customProps: getCustomProps()
      };
      const blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href=url; a.download='love-trial.json'; a.click();
      URL.revokeObjectURL(url);
    }
    
    document.getElementById('jsonUpload').addEventListener('change', function(){
      const file = this.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = e => {
        try{
          const data = JSON.parse(e.target.result);
          function fillTable(tableId, arr){
            const rows = document.querySelectorAll(`#${tableId} tbody tr`);
            arr.forEach((row,i)=>{
              if(rows[i]){
                const cells = rows[i].querySelectorAll('td');
                row.forEach((val,j)=>{
                  if(cells[j]){
                    const sel = cells[j].querySelector('select');
                    if(sel){ sel.value = val; } else { cells[j].innerText = val; }
                  }
                });
              }
            });
          }
          fillTable('mainAspects', data.mainAspects||[]);
          fillTable('importantAspects', data.importantAspects||[]);
          fillTable('otherProps', data.otherProps||[]);

          // Load custom properties
          if (data.customProps && Array.isArray(data.customProps)) {
            const rows = document.querySelectorAll('#customProps tbody tr:not(:last-child)');
            data.customProps.forEach((item, i) => {
              if (rows[i]) {
                const nameInput = rows[i].querySelector('.custom-name');
                const scoreInput = rows[i].querySelector('.custom-score');
                if (nameInput) nameInput.value = item.name || '';
                if (scoreInput) scoreInput.value = item.score || 0;
              }
            });
          }

          updateAll(); // friss√≠tj√ºk a sz√°m√≠t√°sokat a bet√∂lt√∂tt adatokkal
        }catch(err){
          alert('Hib√°s JSON f√°jl.');
        }
      };
      reader.readAsText(file);
    });
  </script>
    
</div>
</body>

</html>
